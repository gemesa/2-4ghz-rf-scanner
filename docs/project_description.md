# Project description

This document contains the detailed project description.

## STM32CubeMX

The basic configuration has to be generated with STM32CubeMX. The following peripherals have to be configured:
- UART - USB-UART adapter <-- Blue Pill
- SPI - Blue Pill <--> nRF24L01+
- TIM - required for delay function
- GPIO - required for CE, SS and LED pins

The `blue_pill_config.ioc` project file and the generated source code can be found at [config/cubemx](config/cubemx).

## Eclipse

An STM32F1xx C project has to be created using the STM32 project templates. All instructions can be found in [Mastering STM32](https://leanpub.com/mastering-stm32). The files generated by CubeMX have to be copied to the proper folders of the Eclipse project manually or by running [tools/cubemx_importer.py](tools/cubemx_importer.py):

```
python cubemx_importer.py <eclipse_project_path> <cubemx_project_path> [<stm32doxyfile_path>]
```

The STM32F103xB macro has to be defined (necessary for building). The functionality is added to the main function.

Includes:
```c
#include "util.h"
#include "wifi_scanner.h"
```

Init functions:
```c
util_init();
wifi_scanner_init();
```

Step functions:
```c
wifi_scanner_step();
blink_led();
```

## Building

Compile and link the code in the Eclipse GUI or by calling `eclipsec.exe` with the proper arguments from command line.

## Downloading

The binary file can be downloaded using STM32CubeProgrammer or OpenOCD and GDB ARM.

## Measurement

The measured data is sent out via UART and can be observed with an USB-UART adapter.

The UART parameters:
- baud rate: 115200bits/s
- word length: 8 bits (including parity)
- parity: none
- stop bits: 1

Measurement results are stored in the [meas](meas) folder.